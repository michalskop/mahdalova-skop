<div id="film-calendar-app"></div>

<style>
#film-calendar-app {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: #fdfbf7;
    color: #101432;
    padding: 2rem;
    border-radius: 12px;
    margin: 0;
    position: relative;
    border: none;
    box-shadow: none;
}

#film-calendar-app *,
#film-calendar-app *::before,
#film-calendar-app *::after {
    box-sizing: border-box;
}

.cal-header {
    text-align: center;
    margin-bottom: 2rem;
}

.cal-header h2 {
    font-size: 1.8rem;
    font-weight: 600;
    color: #101432;
    margin: 0 0 0.5rem 0;
}

.cal-header p {
    color: #812840;
    font-size: 0.95rem;
    margin: 0;
}

.cal-current-date {
    font-size: 0.85rem;
    color: #697fe6;
    margin-top: 0.5rem;
}

/* ===== KLIKAC√ç LEGENDA ===== */
.cal-legend-bar {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    padding: 0.8rem 1rem;
    background: rgba(16, 20, 50, 0.03);
    border-radius: 8px;
}

.cal-legend-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.8rem;
    color: #101432;
    cursor: pointer;
    padding: 0.3rem 0.6rem;
    border-radius: 20px;
    transition: all 0.2s ease;
    user-select: none;
}

.cal-legend-item:hover {
    background: rgba(16, 20, 50, 0.05);
}

.cal-legend-item.active {
    background: rgba(16, 20, 50, 0.1);
    font-weight: 600;
}

.cal-legend-item.today-indicator {
    cursor: default;
    pointer-events: none;
}

.cal-legend-item.today-indicator:hover {
    background: transparent;
}

.cal-legend-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    flex-shrink: 0;
}

.cal-legend-dot.award {
    background: #ffe680;
    border: 1px solid #efb704;
}

.cal-legend-dot.festival {
    background: #ffcba4;
    border: 1px solid #e8412c;
}

.cal-legend-dot.czech {
    background: transparent;
    border: none;
    width: auto;
    height: auto;
    display: flex;
    gap: 3px;
}

.cal-flag {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 0 0 1px rgba(0,0,0,0.15);
    position: relative;
}

.cal-flag-cz {
    background: linear-gradient(to bottom, #fff 50%, #d7141a 50%);
}

.cal-flag-cz::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 7px 0 7px 7px;
    border-color: transparent transparent transparent #11457e;
}

.cal-flag-sk {
    background: linear-gradient(to bottom, #fff 33.3%, #0b4ea2 33.3%, #0b4ea2 66.6%, #ee1c25 66.6%);
}

.cal-legend-dot.today {
    background: transparent;
    box-shadow: 0 0 0 2px #bd9103;
}

/* ===== KALEND√Å≈òOV√Å M≈ò√ç≈ΩKA ===== */
.cal-year-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 2rem;
    padding: 0.5rem;
}

.cal-month-column {
    min-width: 0;
    background: white;
    border-radius: 8px;
    padding: 0.5rem;
    box-shadow: 0 1px 3px rgba(16, 20, 50, 0.08);
}

.cal-month-header {
    text-align: center;
    font-size: 0.75rem;
    font-weight: 600;
    color: #812840;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    padding: 0.4rem 0;
    margin-bottom: 4px;
    border-bottom: 1px solid rgba(16, 20, 50, 0.08);
}

.cal-weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    margin-bottom: 2px;
}

.cal-weekday {
    font-size: 0.45rem;
    color: #697fe6;
    text-align: center;
    padding: 2px 0;
    font-weight: 500;
}

.cal-days-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
}

.cal-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.5rem;
    color: rgba(16, 20, 50, 0.35);
    background: transparent;
    border-radius: 50%;
    position: relative;
    cursor: default;
}

.cal-day.empty {
    visibility: hidden;
}

.cal-day.today {
    color: #bd9103;
    font-weight: 700;
    box-shadow: 0 0 0 2px #bd9103;
}

.cal-day.has-event {
    cursor: pointer;
    transition: all 0.15s ease;
}

.cal-day.has-event:hover {
    transform: scale(1.3);
    z-index: 10;
}

/* Zv√Ωraznƒõn√≠ cel√©ho festivalu p≈ôi hoveru - jemn√Ω obrys bez zvƒõt≈°en√≠ */
.cal-day.festival-highlight {
    box-shadow: 0 0 0 1px rgba(232, 65, 44, 0.5);
}

/* Ceny - zlat√° (sytƒõj≈°√≠) */
.cal-day.award-day {
    background: #ffe680;
    color: #6b5900;
    font-weight: 600;
}

.cal-day.award-day.past-event {
    background: #fff7d9;
    color: #a08060;
}

/* Festivaly - oran≈æovo-ƒçerven√° (sytƒõj≈°√≠) */
.cal-day.festival-day {
    background: #ffcba4;
    color: #7a3a00;
    font-weight: 600;
}

.cal-day.festival-day.past-event {
    background: #ffe4cc;
    color: #a08060;
}

/* V√≠ce ud√°lost√≠ na jeden den - jeden p≈Ølen√Ω krou≈æek */
.cal-day.multi-day {
    background: transparent;
    overflow: hidden;
    cursor: pointer;
}

.cal-day.multi-day:hover {
    transform: scale(1.3);
    z-index: 10;
}

.cal-split-circle {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    overflow: hidden;
}

.cal-split-half {
    position: absolute;
    width: 100%;
    height: 50%;
}

.cal-split-half.top {
    top: 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
}

.cal-split-half.bottom {
    bottom: 0;
}

.cal-split-half.award {
    background: #ffe680;
}

.cal-split-half.festival {
    background: #ffcba4;
}

.cal-split-half.award.past {
    background: #fff7d9;
}

.cal-split-half.festival.past {
    background: #ffe4cc;
}

.cal-split-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 0.5rem;
    font-weight: 600;
    color: #5a4a00;
    z-index: 2;
    text-shadow: 0 0 2px rgba(255,255,255,0.8);
}

.cal-day.today.award-day,
.cal-day.today.festival-day {
    box-shadow: 0 0 0 2px #bd9103;
}

/* Filtrovan√© (skryt√©) dny */
.cal-day.filtered-out {
    background: transparent !important;
    color: rgba(16, 20, 50, 0.2) !important;
    font-weight: 400 !important;
    cursor: default !important;
    pointer-events: none;
}

.cal-day .cal-day-tooltip {
    position: absolute;
    bottom: calc(100% + 5px);
    left: 50%;
    transform: translateX(-50%);
    background: #101432;
    color: white;
    padding: 0.35rem 0.5rem;
    border-radius: 4px;
    font-size: 0.6rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    z-index: 200;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    text-align: center;
    line-height: 1.3;
}

.cal-day .cal-day-tooltip small {
    opacity: 0.75;
    font-size: 0.5rem;
    display: block;
}

.cal-day .cal-day-tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: #101432;
}

.cal-day:hover .cal-day-tooltip {
    opacity: 1;
    visibility: visible;
}

/* ===== RESPONZIVITA ===== */
@media (max-width: 900px) {
    .cal-year-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
    }
}

@media (max-width: 650px) {
    #film-calendar-app {
        padding: 1rem;
    }
    
    .cal-year-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .cal-month-column {
        padding: 0.4rem;
    }
    
    .cal-day {
        font-size: 0.45rem;
    }
    
    .cal-weekday {
        font-size: 0.4rem;
    }
    
    .cal-legend-bar {
        gap: 0.5rem;
        padding: 0.6rem;
    }
    
    .cal-legend-item {
        font-size: 0.7rem;
        padding: 0.25rem 0.4rem;
    }
    
    .cal-legend-dot {
        width: 12px;
        height: 12px;
    }
}

@media (max-width: 400px) {
    .cal-year-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 6px;
    }
    
    .cal-month-column {
        padding: 0.3rem;
    }
    
    .cal-month-header {
        font-size: 0.65rem;
        padding: 0.3rem 0;
    }
    
    .cal-day {
        font-size: 0.4rem;
    }
    
    .cal-header h2 {
        font-size: 1.4rem;
    }
    
    .cal-split-number {
        font-size: 0.4rem;
    }
}

@media (max-width: 650px) {
    .cal-panel {
        max-width: 95%;
        margin: 1rem;
        max-height: 85vh;
    }
    
    .cal-panel-header {
        padding: 1.2rem 1rem;
    }
    
    .cal-panel-icon {
        font-size: 2rem;
    }
    
    .cal-panel-title {
        font-size: 1.1rem;
    }
    
    .cal-panel-body {
        padding: 1rem;
    }
    
    .cal-panel-section {
        margin-bottom: 0.8rem;
    }
    
    .cal-events-grid {
        grid-template-columns: 1fr;
    }
    
    .cal-event-card {
        padding: 1rem;
    }
}

/* ============================================
   FLOURISH-STYLE POPUP PANEL
   ============================================ */
.cal-panel-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(16, 20, 50, 0.4);
    z-index: 1000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.cal-panel-overlay.active {
    display: flex;
}

.cal-panel {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(16, 20, 50, 0.3);
    position: relative;
    animation: panelSlideIn 0.3s ease;
}

@keyframes panelSlideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.cal-panel-header {
    padding: 1.5rem;
    border-bottom: 1px solid rgba(16, 20, 50, 0.1);
    position: relative;
}

.cal-panel-header.award {
    background: linear-gradient(135deg, #efb704 0%, #bd9103 100%);
    color: white;
}

.cal-panel-header.festival {
    background: linear-gradient(135deg, #e8412c 0%, #c5301f 100%);
    color: white;
}

.cal-panel-header.award .cal-panel-title,
.cal-panel-header.award .cal-panel-subtitle,
.cal-panel-header.festival .cal-panel-title,
.cal-panel-header.festival .cal-panel-subtitle {
    color: white;
}

.cal-panel-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 32px;
    height: 32px;
    border: none;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.5rem;
    line-height: 32px;
    text-align: center;
    color: white;
    transition: all 0.2s ease;
    padding: 0;
}

.cal-panel-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.cal-panel-icon {
    font-size: 2.5rem;
    margin-bottom: 0.75rem;
}

.cal-panel-title {
    font-size: 1.4rem;
    font-weight: 600;
    color: #101432;
    margin: 0 0 0.25rem 0;
}

.cal-panel-subtitle {
    font-size: 0.9rem;
    color: #697fe6;
    font-style: italic;
    margin: 0;
}

.cal-panel-date {
    display: inline-block;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    margin-top: 0.75rem;
}

.cal-panel-status {
    display: inline-block;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: 0.5rem;
}

.cal-panel-status.past {
    background: #28a745;
    color: white;
}

.cal-panel-status.ongoing {
    background: #ff6b35;
    color: white;
}

.cal-panel-status.upcoming {
    background: rgba(255, 255, 255, 0.3);
    color: white;
}

.cal-panel-body {
    padding: 1.5rem;
}

.cal-panel-section {
    margin-bottom: 1.25rem;
}

.cal-panel-section:last-child {
    margin-bottom: 0;
}

.cal-panel-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #812840;
    margin-bottom: 0.3rem;
    font-weight: 600;
}

.cal-panel-value {
    color: #101432;
    font-size: 0.95rem;
    line-height: 1.5;
}

.cal-panel-value a {
    color: #697fe6;
    text-decoration: none;
}

.cal-panel-value a:hover {
    text-decoration: underline;
}

.cal-panel-winner {
    background: linear-gradient(135deg, rgba(239, 183, 4, 0.2) 0%, rgba(239, 183, 4, 0.1) 100%);
    border-left: 4px solid #efb704;
    padding: 1rem;
    border-radius: 0 8px 8px 0;
    margin-top: 1rem;
}

.cal-panel-winner-title {
    font-size: 0.8rem;
    text-transform: uppercase;
    color: #812840;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.cal-panel-winner-name {
    font-size: 1.1rem;
    font-weight: 600;
    color: #101432;
}

.cal-panel-trailer {
    margin-top: 1rem;
}

.cal-trailer-wrapper {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
    border-radius: 8px;
}

.cal-trailer-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}

/* ============================================
   CHRONOLOGICK√ù SEZNAM UD√ÅLOST√ç
   ============================================ */
.cal-section-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin: 2.5rem 0 1.5rem;
}

.cal-section-header h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #812840;
}

.cal-section-line {
    flex: 1;
    height: 2px;
    background: linear-gradient(90deg, rgba(16, 20, 50, 0.15), transparent);
}

.cal-events-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
}

.cal-event-card {
    background: white;
    border-radius: 10px;
    padding: 1.25rem;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
}

.cal-event-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
}

.cal-event-card.award::before {
    background: #efb704;
}

.cal-event-card.festival::before {
    background: #e8412c;
}

.cal-event-card.past {
    opacity: 0.85;
    background: #f8f6f0;
}

.cal-event-card.past .cal-event-name::after {
    content: ' ‚úì';
    color: #28a745;
}

/* Filtrovan√© karty */
.cal-event-card.filtered-out {
    display: none;
}

/* Cel√° karta je klikac√≠ */
.cal-event-card {
    cursor: pointer;
    transition: all 0.2s ease;
}

.cal-event-card:hover {
    box-shadow: 0 4px 12px rgba(16, 20, 50, 0.12);
    transform: translateY(-2px);
}

.cal-event-header {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.cal-event-icon {
    font-size: 1.5rem;
    line-height: 1;
}

.cal-event-content {
    flex: 1;
}

.cal-event-date {
    font-size: 0.8rem;
    color: #812840;
    margin-bottom: 0.25rem;
    font-weight: 500;
}

.cal-event-name {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    line-height: 1.3;
    color: #101432;
}

.cal-event-subtitle {
    font-size: 0.8rem;
    color: #697fe6;
    font-style: italic;
}

.cal-event-details {
    padding-top: 1rem;
    border-top: 1px solid rgba(16, 20, 50, 0.1);
}

.cal-detail-row {
    display: flex;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
    font-size: 0.85rem;
}

.cal-detail-label {
    color: #812840;
    min-width: 70px;
    font-weight: 500;
}

.cal-detail-value {
    color: #101432;
    flex: 1;
}

.cal-detail-value a {
    color: #697fe6;
    text-decoration: none;
}

.cal-winner-tag {
    display: inline-block;
    background: rgba(239, 183, 4, 0.2);
    color: #812840;
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 500;
}

@media (max-width: 768px) {
    .cal-events-grid {
        grid-template-columns: 1fr;
    }
    
    .cal-panel {
        max-height: 85vh;
    }
}
</style>

<script>
(function() {
    var TODAY = new Date();
    var currentFilter = 'all';
    
    var events = [
        {
            id: 'critics-choice',
            type: 'award',
            name: 'Critics Choice Movie Awards',
            nameEn: 'Critics Choice Awards',
            date: '4. ledna 2026',
            dateObj: new Date(2026, 0, 4),
            czech: false,
            country: 'USA',
            tradition: 'Od roku 1996',
            edition: '31. roƒçn√≠k',
            organizer: 'Critics Choice Association',
            description: 'Ceny udƒõlovan√© americk√Ωmi filmov√Ωmi a televizn√≠mi kritiky sdru≈æen√Ωmi v Critics Choice Association (d≈ô√≠ve BFCA). Pova≈æov√°ny za jeden z nejspolehlivƒõj≈°√≠ch indik√°tor≈Ø budouc√≠ch oscarov√Ωch v√≠tƒõz≈Ø.',
            website: 'https://www.criticschoice.com',
            winner2026: 'One Battle After Another (Paul Thomas Anderson)',
            trailerYouTube: 'feOQFKv2Lw4'
        },
        {
            id: 'golden-globes',
            type: 'award',
            name: 'Zlat√© gl√≥by',
            nameEn: 'Golden Globe Awards',
            date: '11. ledna 2026',
            dateObj: new Date(2026, 0, 11),
            czech: false,
            country: 'USA',
            tradition: 'Od roku 1944',
            edition: '83. roƒçn√≠k',
            organizer: 'Hollywood Foreign Press Association (HFPA)',
            description: 'Ceny udƒõlovan√© Hollywoodskou asociac√≠ zahraniƒçn√≠ho tisku. Rozdƒõlen√© na drama a komedie/muzik√°l, co≈æ d√°v√° ≈°anci v√≠ce film≈Øm.',
            website: 'https://goldenglobes.com',
            winner2026: 'Hamnet (drama), One Battle After Another (komedie)',
            trailerYouTube: 'xYcgQMxQwmk',
            trailerYouTube2: 'feOQFKv2Lw4'
        },
        {
            id: 'european-film-awards',
            type: 'award',
            name: 'Evropsk√© filmov√© ceny',
            nameEn: 'European Film Awards',
            date: '17. ledna 2026',
            dateObj: new Date(2026, 0, 17),
            czech: false,
            country: 'Nƒõmecko',
            tradition: 'Od roku 1988',
            edition: '38. roƒçn√≠k',
            organizer: 'Evropsk√° filmov√° akademie (EFA)',
            description: 'Nejv√Ωznamnƒõj≈°√≠ ocenƒõn√≠ evropsk√© kinematografie, udƒõlovan√© Evropskou filmovou akademi√≠ se s√≠dlem v Berl√≠nƒõ.',
            website: 'https://www.europeanfilmawards.eu',
            location: 'Berl√≠n, Nƒõmecko',
            winner2026: 'Sentimental Value (Joachim Trier)',
            trailerYouTube: 'lKbcKQN5Yrw'
        },
        {
            id: 'sundance',
            type: 'festival',
            name: 'Sundance',
            nameEn: 'Sundance Film Festival',
            date: '22. ledna ‚Äì 1. √∫nora 2026',
            dateObj: new Date(2026, 0, 22),
            endDateObj: new Date(2026, 1, 1),
            czech: false,
            country: 'USA',
            tradition: 'Od roku 1978',
            edition: '42. roƒçn√≠k',
            organizer: 'Sundance Institute',
            description: 'Nejvƒõt≈°√≠ festival nez√°visl√©ho filmu na svƒõtƒõ, zalo≈æen√Ω Robertem Redfordem. Odskoƒçil odtud nap≈ô. Sex, l≈æi a video, Pulp Fiction ƒçi Get Out.',
            website: 'https://www.sundance.org',
            location: 'Park City, Utah, USA'
        },
        {
            id: 'hungarian-film-week',
            type: 'festival',
            name: 'Maƒèarsk√Ω filmov√Ω t√Ωden',
            nameEn: 'Hungarian Film Week',
            date: '2. ‚Äì 8. √∫nora 2026',
            dateObj: new Date(2026, 1, 2),
            endDateObj: new Date(2026, 1, 8),
            czech: false,
            country: 'Maƒèarsko',
            tradition: 'Od roku 2014',
            edition: '45. roƒçn√≠k',
            organizer: 'Maƒèarsk√° filmov√° akademie',
            description: 'T√Ωdenn√≠ p≈ôehl√≠dka nejlep≈°√≠ch maƒèarsk√Ωch film≈Ø uplynul√©ho roku.',
            website: 'https://mfszemle.hu',
            location: 'Budape≈°≈•, Maƒèarsko'
        },
        {
            id: 'czech-critics',
            type: 'award',
            name: 'Ceny ƒçesk√© filmov√© kritiky',
            nameEn: 'Czech Film Critics Awards',
            date: '7. √∫nora 2026',
            dateObj: new Date(2026, 1, 7),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 2008',
            edition: '19. roƒçn√≠k',
            organizer: 'Asociace ƒçesk√Ωch filmov√Ωch kritik≈Ø (AƒåFK)',
            description: 'Nez√°visl√© ocenƒõn√≠ udƒõlovan√© ƒçleny Asociace ƒçesk√Ωch filmov√Ωch kritik≈Ø.',
            website: 'https://www.filmovakritika.cz'
        },
        {
            id: 'berlinale',
            type: 'festival',
            name: 'Berlinale',
            nameEn: 'Berlin International Film Festival',
            date: '12. ‚Äì 22. √∫nora 2026',
            dateObj: new Date(2026, 1, 12),
            endDateObj: new Date(2026, 1, 22),
            czech: false,
            country: 'Nƒõmecko',
            tradition: 'Od roku 1951',
            edition: '76. roƒçn√≠k',
            organizer: 'Kulturveranstaltungen des Bundes in Berlin GmbH',
            description: 'Souƒç√°st ‚Äûvelk√© trojky" svƒõtov√Ωch festival≈Ø (Cannes, Ben√°tky, Berl√≠n). Zn√°m√Ω politicky anga≈æovan√Ωm v√Ωbƒõrem film≈Ø a ve≈ôejnou p≈ô√≠stupnost√≠ ‚Äì prod√° p≈ôes 300 000 vstupenek.',
            website: 'https://www.berlinale.de',
            location: 'Berl√≠n',
            mainPrize: 'Zlat√Ω medvƒõd'
        },
        {
            id: 'spirit-awards',
            type: 'award',
            name: 'Ceny nez√°visl√©ho filmu',
            nameEn: 'Film Independent Spirit Awards',
            date: '15. √∫nora 2026',
            dateObj: new Date(2026, 1, 15),
            czech: false,
            country: 'USA',
            tradition: 'Od roku 1984',
            edition: '41. roƒçn√≠k',
            organizer: 'Film Independent',
            description: 'Presti≈æn√≠ ocenƒõn√≠ pro nez√°visl√© americk√© filmy.',
            website: 'https://filmindependent.org/spirit-awards'
        },
        {
            id: 'bafta',
            type: 'award',
            name: 'Britsk√© filmov√© ceny BAFTA',
            nameEn: 'BAFTA Film Awards',
            date: '22. √∫nora 2026',
            dateObj: new Date(2026, 1, 22),
            czech: false,
            country: 'Velk√° Brit√°nie',
            tradition: 'Od roku 1949',
            edition: '79. roƒçn√≠k',
            organizer: 'British Academy of Film and Television Arts',
            description: 'Ceny Britsk√© akademie filmov√©ho a televizn√≠ho umƒõn√≠. Druh√© nejsledovanƒõj≈°√≠ filmov√© ocenƒõn√≠ po Oscarech, ƒçasto p≈ôedpov√≠daj√≠ jejich v√Ωsledky.',
            website: 'https://www.bafta.org'
        },
        {
            id: 'cesar',
            type: 'award',
            name: 'Francouzsk√© filmov√© ceny C√©sar',
            nameEn: 'C√©sar Awards',
            date: '27. √∫nora 2026',
            dateObj: new Date(2026, 1, 27),
            czech: false,
            country: 'Francie',
            tradition: 'Od roku 1976',
            edition: '51. roƒçn√≠k',
            organizer: 'Acad√©mie des Arts et Techniques du Cin√©ma',
            description: 'Nejv√Ωznamnƒõj≈°√≠ francouzsk√© filmov√© ocenƒõn√≠.',
            website: 'https://www.academie-cinema.org'
        },
        {
            id: 'goya',
            type: 'award',
            name: '≈†panƒõlsk√© filmov√© ceny Goya',
            nameEn: 'Goya Awards',
            date: '28. √∫nora 2026',
            dateObj: new Date(2026, 1, 28),
            czech: false,
            country: '≈†panƒõlsko',
            tradition: 'Od roku 1987',
            edition: '40. roƒçn√≠k',
            organizer: 'Academia de las Artes y las Ciencias Cinematogr√°ficas',
            description: 'Nejv√Ωznamnƒõj≈°√≠ ≈°panƒõlsk√© filmov√© ocenƒõn√≠.',
            website: 'https://www.premiosgoya.com'
        },
        {
            id: 'polish-eagles',
            type: 'award',
            name: 'Polsk√© filmov√© ceny Or≈Çy',
            nameEn: 'Polish Film Awards',
            date: 'zaƒç√°tek b≈ôezna 2026',
            dateObj: new Date(2026, 2, 9),
            czech: false,
            country: 'Polsko',
            tradition: 'Od roku 1999',
            edition: '28. roƒçn√≠k',
            organizer: 'Polsk√° filmov√° akademie',
            description: 'Nejv√Ωznamnƒõj≈°√≠ polsk√© filmov√© ocenƒõn√≠.',
            website: 'https://pfrr.pl',
            location: 'Var≈°ava, Polsko'
        },
        {
            id: 'jeden-svet',
            type: 'festival',
            name: 'Jeden svƒõt',
            nameEn: 'One World',
            date: '11. ‚Äì 24. b≈ôezna 2026',
            dateObj: new Date(2026, 2, 11),
            endDateObj: new Date(2026, 2, 24),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 1999',
            edition: '28. roƒçn√≠k',
            organizer: 'Spoleƒçnost ƒålovƒõk v t√≠sni',
            description: 'Nejvƒõt≈°√≠ festival dokument√°rn√≠ch film≈Ø o lidsk√Ωch pr√°vech na svƒõtƒõ. Prom√≠t√° filmy z krizov√Ωch oblast√≠ a nab√≠z√≠ diskuze s tv≈Ørci i aktivisty.',
            website: 'https://www.jedensvet.cz',
            location: 'Praha'
        },
        {
            id: 'czech-lion',
            type: 'award',
            name: 'ƒåesk√Ω lev',
            nameEn: 'Czech Lion Awards',
            date: '14. b≈ôezna 2026',
            dateObj: new Date(2026, 2, 14),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 1993',
            edition: '33. roƒçn√≠k',
            organizer: 'ƒåesk√° filmov√° a televizn√≠ akademie (ƒåFTA)',
            description: 'Hlavn√≠ ƒçesk√© filmov√© ocenƒõn√≠ udƒõlovan√© ƒåeskou filmovou a televizn√≠ akademi√≠ (ƒåFTA). Vych√°z√≠ z hlasov√°n√≠ filmov√Ωch profesion√°l≈Ø.',
            website: 'https://www.ceskylev.cz'
        },
        {
            id: 'oscars',
            type: 'award',
            name: 'Ceny Akademie (Oscary)',
            nameEn: 'Academy Awards (Oscars)',
            date: 'noc z 15. na 16. b≈ôezna 2026',
            dateObj: new Date(2026, 2, 16),
            czech: false,
            country: 'USA',
            tradition: 'Od roku 1929',
            edition: '98. roƒçn√≠k',
            organizer: 'Academy of Motion Picture Arts and Sciences',
            description: 'Nejsledovanƒõj≈°√≠ filmov√© ocenƒõn√≠ na svƒõtƒõ. V√≠tƒõzstv√≠ m≈Ø≈æe film≈Øm p≈ôin√©st des√≠tky milion≈Ø dolar≈Ø nav√≠c a herc≈Øm otev≈ô√≠t dve≈ôe k nov√Ωm rol√≠m.',
            website: 'https://www.oscars.org',
            note: 'Nominace ozn√°meny 22. ledna 2026'
        },
        {
            id: 'diagonale',
            type: 'festival',
            name: 'Diagonale',
            nameEn: 'Festival of Austrian Film',
            date: '18. ‚Äì 23. b≈ôezna 2026',
            dateObj: new Date(2026, 2, 18),
            endDateObj: new Date(2026, 2, 23),
            czech: false,
            country: 'Rakousko',
            tradition: 'Od roku 1998',
            edition: '29. roƒçn√≠k',
            organizer: 'Diagonale',
            description: 'Nejv√Ωznamnƒõj≈°√≠ festival rakousk√©ho filmu.',
            website: 'https://www.diagonale.at',
            location: '≈†t√Ωrsk√Ω Hradec, Rakousko'
        },
        {
            id: 'slovak-sun',
            type: 'award',
            name: 'Slnko v sieti',
            nameEn: 'Sun in a Net Awards',
            date: 'duben 2026',
            dateObj: new Date(2026, 3, 15),
            czech: true,
            country: 'Slovensko',
            tradition: 'Od roku 2004',
            edition: '15. roƒçn√≠k',
            organizer: 'Slovensk√° filmov√° a telev√≠zna akad√©mia',
            description: 'Nejv√Ωznamnƒõj≈°√≠ slovensk√© filmov√© ocenƒõn√≠.',
            website: 'https://www.slnkovsieti.sk',
            location: 'Bratislava, Slovensko'
        },
        {
            id: 'german-film-award',
            type: 'award',
            name: 'Nƒõmeck√° filmov√° cena (Lola)',
            nameEn: 'Deutscher Filmpreis',
            date: 'duben 2026',
            dateObj: new Date(2026, 3, 24),
            czech: false,
            country: 'Nƒõmecko',
            tradition: 'Od roku 1951',
            edition: '76. roƒçn√≠k',
            organizer: 'Deutsche Filmakademie',
            description: 'Nejv√Ωznamnƒõj≈°√≠ nƒõmeck√© filmov√© ocenƒõn√≠.',
            website: 'https://www.deutscher-filmpreis.de',
            location: 'Berl√≠n, Nƒõmecko'
        },
        {
            id: 'anifilm',
            type: 'festival',
            name: 'Anifilm',
            nameEn: 'International Animated Film Festival',
            date: '5. ‚Äì 10. kvƒõtna 2026',
            dateObj: new Date(2026, 4, 5),
            endDateObj: new Date(2026, 4, 10),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 2010',
            edition: '17. roƒçn√≠k',
            organizer: 'Anifilm, z.s.',
            description: 'Mezin√°rodn√≠ festival animovan√©ho filmu.',
            website: 'https://www.anifilm.cz',
            location: 'Liberec'
        },
        {
            id: 'cannes',
            type: 'festival',
            name: 'Cannes',
            nameEn: 'Festival de Cannes',
            date: '12. ‚Äì 23. kvƒõtna 2026',
            dateObj: new Date(2026, 4, 12),
            endDateObj: new Date(2026, 4, 23),
            czech: false,
            country: 'Francie',
            tradition: 'Od roku 1946',
            edition: '79. roƒçn√≠k',
            organizer: 'Association Fran√ßaise du Festival International du Film',
            description: 'Nejpresti≈ænƒõj≈°√≠ filmov√Ω festival svƒõta, odrazov√Ω m≈Østek pro umƒõlecky ambici√≥zn√≠ filmy. V√Ωbƒõr do hlavn√≠ soutƒõ≈æe je pova≈æov√°n za nejvy≈°≈°√≠ mo≈æn√© uzn√°n√≠.',
            website: 'https://www.festival-cannes.com',
            location: 'Cannes, Francie',
            mainPrize: 'Zlat√° palma'
        },
        {
            id: 'zlinfest',
            type: 'festival',
            name: 'Zl√≠n Film Festival',
            nameEn: 'International Festival for Children and Youth',
            date: '28. kvƒõtna ‚Äì 3. ƒçervna 2026',
            dateObj: new Date(2026, 4, 28),
            endDateObj: new Date(2026, 5, 3),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 1961',
            edition: '66. roƒçn√≠k',
            organizer: 'Filmfest, s.r.o.',
            description: 'Nejstar≈°√≠ festival film≈Ø pro dƒõti a ml√°de≈æ na svƒõtƒõ.',
            website: 'https://www.zlinfest.cz',
            location: 'Zl√≠n'
        },
        {
            id: 'austrian-film-award',
            type: 'award',
            name: 'Rakousk√° filmov√° cena',
            nameEn: '√ñsterreichischer Filmpreis',
            date: '18. ƒçervna 2026',
            dateObj: new Date(2026, 5, 18),
            czech: false,
            country: 'Rakousko',
            tradition: 'Od roku 2011',
            edition: '16. roƒçn√≠k',
            organizer: 'Akademie des √ñsterreichischen Films',
            description: 'N√°rodn√≠ filmov√° cena Rakouska.',
            website: 'https://www.oesterreichische-filmakademie.at',
            location: 'V√≠de≈à, Rakousko'
        },
        {
            id: 'kviff',
            type: 'festival',
            name: 'Karlovy Vary',
            nameEn: 'Karlovy Vary IFF',
            date: '3. ‚Äì 11. ƒçervence 2026',
            dateObj: new Date(2026, 6, 3),
            endDateObj: new Date(2026, 6, 11),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 1946',
            edition: '60. roƒçn√≠k',
            organizer: 'Film Servis Festival Karlovy Vary',
            description: 'Nejstar≈°√≠ a nejpresti≈ænƒõj≈°√≠ filmov√Ω festival ve st≈ôedn√≠ Evropƒõ. Kategorie A (akreditace FIAPF). Zn√°m√Ω neform√°ln√≠ atmosf√©rou a div√°ckou p≈ô√≠stupnost√≠.',
            website: 'https://www.kviff.com',
            location: 'Karlovy Vary',
            mainPrize: 'K≈ôi≈°≈•√°lov√Ω globus'
        },
        {
            id: 'lfs',
            type: 'festival',
            name: 'Letn√≠ filmov√° ≈°kola',
            nameEn: 'Summer Film School',
            date: '24. ‚Äì 30. ƒçervence 2026',
            dateObj: new Date(2026, 6, 24),
            endDateObj: new Date(2026, 6, 30),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 1964',
            edition: '52. roƒçn√≠k',
            organizer: 'Asociace ƒçesk√Ωch filmov√Ωch klub≈Ø',
            description: 'Nejstar≈°√≠ filmov√° p≈ôehl√≠dka v ƒåesk√© republice. Kombinuje projekce film≈Ø s p≈ôedn√°≈°kami, workshopy a debatami s filmov√Ωmi tv≈Ørci.',
            website: 'https://www.lfs.cz',
            location: 'Uhersk√© Hradi≈°tƒõ'
        },
        {
            id: 'venice',
            type: 'festival',
            name: 'Ben√°tky',
            nameEn: 'Venice Film Festival',
            date: '2. ‚Äì 12. z√°≈ô√≠ 2026',
            dateObj: new Date(2026, 8, 2),
            endDateObj: new Date(2026, 8, 12),
            czech: false,
            country: 'It√°lie',
            tradition: 'Od roku 1932',
            edition: '83. roƒçn√≠k',
            organizer: 'La Biennale di Venezia',
            description: 'Nejstar≈°√≠ filmov√Ω festival na svƒõtƒõ. V posledn√≠ch letech kl√≠ƒçov√° startovn√≠ rampa pro oscarov√© kandid√°ty ‚Äì v√≠tƒõzov√© ƒçasto uspƒõj√≠ i na Oscarech.',
            website: 'https://www.labiennale.org/en/cinema',
            location: 'Ben√°tky, It√°lie',
            mainPrize: 'Zlat√Ω lev'
        },
        {
            id: 'tiff',
            type: 'festival',
            name: 'Toronto',
            nameEn: 'Toronto International Film Festival',
            date: '10. ‚Äì 20. z√°≈ô√≠ 2026',
            dateObj: new Date(2026, 8, 10),
            endDateObj: new Date(2026, 8, 20),
            czech: false,
            country: 'Kanada',
            tradition: 'Od roku 1976',
            edition: '51. roƒçn√≠k',
            organizer: 'Toronto International Film Festival Inc.',
            description: 'Nejvƒõt≈°√≠ ve≈ôejnƒõ p≈ô√≠stupn√Ω filmov√Ω festival v Severn√≠ Americe. Div√°ci zde mohou vidƒõt filmy je≈°tƒõ p≈ôed jejich ≈°irok√Ωm uveden√≠m. People\'s Choice Award je spolehliv√Ω p≈ôedzvƒõst√≠ oscarov√Ωch nominac√≠.',
            website: 'https://www.tiff.net',
            location: 'Toronto, Kanada',
            mainPrize: 'People\'s Choice Award'
        },
        {
            id: 'serial-killer',
            type: 'festival',
            name: 'Serial Killer',
            nameEn: 'International TV Festival',
            date: '23. ‚Äì 28. z√°≈ô√≠ 2026',
            dateObj: new Date(2026, 8, 23),
            endDateObj: new Date(2026, 8, 28),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 2018',
            edition: '9. roƒçn√≠k',
            organizer: 'Serial Killer z.s.',
            description: 'Festival zamƒõ≈ôen√Ω na televizn√≠ a webov√© seri√°ly.',
            website: 'https://serialkiller.tv',
            location: 'Brno'
        },
        {
            id: 'jihlava',
            type: 'festival',
            name: 'Ji.hlava IDFF',
            nameEn: 'International Documentary Film Festival',
            date: '23. ≈ô√≠jna ‚Äì 1. listopadu 2026',
            dateObj: new Date(2026, 9, 23),
            endDateObj: new Date(2026, 10, 1),
            czech: true,
            country: 'ƒåesko',
            tradition: 'Od roku 1997',
            edition: '30. roƒçn√≠k',
            organizer: 'Ji.hlava ‚Äì Institut dokument√°rn√≠ho filmu',
            description: 'Nejvƒõt≈°√≠ festival dokument√°rn√≠ch film≈Ø ve st≈ôedn√≠ Evropƒõ. Zamƒõ≈ôuje se na tv≈Ørƒç√≠ a experiment√°ln√≠ dokumenty. Souƒç√°st√≠ je i industry sekce.',
            website: 'https://www.ji-hlava.cz',
            location: 'Jihlava'
        }
    ];

    // Se≈ôazen√≠ podle data
    events.sort(function(a, b) {
        return a.dateObj - b.dateObj;
    });

    function isPast(event) {
        var endDate = event.endDateObj || event.dateObj;
        return endDate < TODAY;
    }
    
    function isOngoing(event) {
        if (!event.endDateObj) return false;
        return event.dateObj <= TODAY && TODAY <= event.endDateObj;
    }

    function formatCurrentDate() {
        var months = ['ledna', '√∫nora', 'b≈ôezna', 'dubna', 'kvƒõtna', 'ƒçervna', 
                     'ƒçervence', 'srpna', 'z√°≈ô√≠', '≈ô√≠jna', 'listopadu', 'prosince'];
        return TODAY.getDate() + '. ' + months[TODAY.getMonth()] + ' ' + TODAY.getFullYear();
    }
    
    var monthNames = ['ledna', '√∫nora', 'b≈ôezna', 'dubna', 'kvƒõtna', 'ƒçervna', 
                      'ƒçervence', 'srpna', 'z√°≈ô√≠', '≈ô√≠jna', 'listopadu', 'prosince'];

    function matchesFilter(event, filter) {
        if (filter === 'all') return true;
        if (filter === 'award') return event.type === 'award';
        if (filter === 'festival') return event.type === 'festival';
        if (filter === 'czech') return event.czech === true;
        return true;
    }

    function applyFilter(filter) {
        currentFilter = filter;
        
        // Aktualizace legendy
        document.querySelectorAll('.cal-legend-item[data-filter]').forEach(function(item) {
            if (item.getAttribute('data-filter') === filter) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
        
        // Filtrov√°n√≠ dn≈Ø v kalend√°≈ôi
        document.querySelectorAll('.cal-day.has-event').forEach(function(day) {
            var eventType = day.getAttribute('data-type') || '';
            var eventCzech = day.getAttribute('data-czech') === 'true';
            
            var matches = false;
            if (filter === 'all') {
                matches = true;
            } else if (filter === 'award') {
                matches = eventType.indexOf('award') !== -1;
            } else if (filter === 'festival') {
                matches = eventType.indexOf('festival') !== -1;
            } else if (filter === 'czech') {
                matches = eventCzech;
            }
            
            if (matches) {
                day.classList.remove('filtered-out');
            } else {
                day.classList.add('filtered-out');
            }
        });
        
        // Filtrov√°n√≠ karet
        document.querySelectorAll('.cal-event-card').forEach(function(card) {
            var eventType = card.getAttribute('data-type');
            var eventCzech = card.getAttribute('data-czech') === 'true';
            
            var matches = false;
            if (filter === 'all') matches = true;
            else if (filter === 'award') matches = eventType === 'award';
            else if (filter === 'festival') matches = eventType === 'festival';
            else if (filter === 'czech') matches = eventCzech;
            
            if (matches) {
                card.classList.remove('filtered-out');
            } else {
                card.classList.add('filtered-out');
            }
        });
    }

    function openPanel(event) {
        var overlay = document.getElementById('cal-panel-overlay');
        var panel = document.getElementById('cal-panel-content');
        
        var icon = event.type === 'award' ? 'üèÜ' : 'üé¨';
        var past = isPast(event);
        var ongoing = isOngoing(event);
        
        var statusClass, statusText;
        if (ongoing) {
            statusClass = 'ongoing';
            statusText = 'Pr√°vƒõ prob√≠h√°';
        } else if (past) {
            statusClass = 'past';
            statusText = 'Probƒõhlo';
        } else {
            statusClass = 'upcoming';
            statusText = 'Nadch√°zej√≠c√≠';
        }
        
        // Zjist√≠me, jestli n√°zev u≈æ obsahuje zemi
        var showCountryInTitle = event.country && 
            event.name.toLowerCase().indexOf(event.country.toLowerCase()) === -1 &&
            event.name.toLowerCase().indexOf('ƒçesk') === -1 &&
            event.name.toLowerCase().indexOf('francous') === -1 &&
            event.name.toLowerCase().indexOf('≈°panƒõls') === -1 &&
            event.name.toLowerCase().indexOf('polsk') === -1 &&
            event.name.toLowerCase().indexOf('nƒõmeck') === -1 &&
            event.name.toLowerCase().indexOf('rakous') === -1 &&
            event.name.toLowerCase().indexOf('britsk') === -1 &&
            event.name.toLowerCase().indexOf('maƒèarsk') === -1 &&
            event.name.toLowerCase().indexOf('evropsk') === -1;
        
        // M√≠sto - pokud nen√≠, pou≈æijeme zemi
        var locationText = event.location || event.country;
        
        // Tradice + roƒçn√≠k v jednom ≈ô√°dku
        var bodyHTML = '<div class="cal-panel-section"><div class="cal-panel-label">Tradice</div><div class="cal-panel-value">' + event.tradition + ', ' + event.edition + '</div></div>';
        
        // Po≈ôadatel + m√≠sto v jednom ≈ô√°dku
        if (event.organizer || locationText) {
            var orgLocParts = [];
            if (event.organizer) orgLocParts.push(event.organizer);
            if (locationText) orgLocParts.push(locationText);
            bodyHTML += '<div class="cal-panel-section"><div class="cal-panel-label">Po≈ô√°d√°</div><div class="cal-panel-value">' + orgLocParts.join(' ¬∑ ') + '</div></div>';
        }
        
        if (event.mainPrize) {
            bodyHTML += '<div class="cal-panel-section"><div class="cal-panel-label">Hlavn√≠ cena</div><div class="cal-panel-value">' + event.mainPrize + '</div></div>';
        }
        
        bodyHTML += '<div class="cal-panel-section"><div class="cal-panel-label">O ud√°losti</div><div class="cal-panel-value">' + event.description + '</div></div>';
        bodyHTML += '<div class="cal-panel-section"><div class="cal-panel-label">Web</div><div class="cal-panel-value"><a href="' + event.website + '" target="_blank">' + event.website.replace('https://', '').replace('www.', '') + '</a></div></div>';
        
        if (event.winner2026) {
            bodyHTML += '<div class="cal-panel-winner"><div class="cal-panel-winner-title">üèÜ V√≠tƒõz 2026</div><div class="cal-panel-winner-name">' + event.winner2026 + '</div></div>';
            if (event.trailerYouTube) {
                bodyHTML += '<div class="cal-panel-trailer"><div class="cal-panel-label" style="margin-bottom: 0.5rem;">Trailer</div><div class="cal-trailer-wrapper"><iframe src="https://www.youtube.com/embed/' + event.trailerYouTube + '?si=embed" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div></div>';
            }
            if (event.trailerYouTube2) {
                bodyHTML += '<div class="cal-panel-trailer"><div class="cal-panel-label" style="margin-bottom: 0.5rem;">Trailer 2</div><div class="cal-trailer-wrapper"><iframe src="https://www.youtube.com/embed/' + event.trailerYouTube2 + '?si=embed" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div></div>';
            }
        }
        if (event.note) {
            bodyHTML += '<div class="cal-panel-section"><div class="cal-panel-label">Pozn√°mka</div><div class="cal-panel-value" style="font-style: italic; color: #812840;">' + event.note + '</div></div>';
        }
        
        panel.innerHTML = '<div class="cal-panel-header ' + event.type + '"><button class="cal-panel-close" onclick="closePanel()">√ó</button><div class="cal-panel-icon">' + icon + '</div><h3 class="cal-panel-title">' + event.name + (showCountryInTitle ? ' (' + event.country + ')' : '') + '</h3><p class="cal-panel-subtitle">' + event.nameEn + '</p><span class="cal-panel-date">' + event.date + '</span><span class="cal-panel-status ' + statusClass + '">' + statusText + '</span></div><div class="cal-panel-body">' + bodyHTML + '</div>';
        
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    window.closePanel = function() {
        var overlay = document.getElementById('cal-panel-overlay');
        overlay.classList.remove('active');
        document.body.style.overflow = '';
    };
    
    window.openPanelById = function(eventId) {
        var event = events.find(function(e) { return e.id === eventId; });
        if (event) openPanel(event);
    };
    
    window.openMultiPanel = function(eventId1, eventId2) {
        var event1 = events.find(function(e) { return e.id === eventId1; });
        var event2 = events.find(function(e) { return e.id === eventId2; });
        if (event1 && event2) openPanelMulti(event1, event2);
    };
    
    function openPanelMulti(event1, event2) {
        var overlay = document.getElementById('cal-panel-overlay');
        var panel = document.getElementById('cal-panel-content');
        
        function buildEventSection(event) {
            var icon = event.type === 'award' ? 'üèÜ' : 'üé¨';
            var past = isPast(event);
            var ongoing = isOngoing(event);
            
            var statusClass, statusText;
            if (ongoing) {
                statusClass = 'ongoing';
                statusText = 'Pr√°vƒõ prob√≠h√°';
            } else if (past) {
                statusClass = 'past';
                statusText = 'Probƒõhlo';
            } else {
                statusClass = 'upcoming';
                statusText = 'Nadch√°zej√≠c√≠';
            }
            
            var showCountryInTitle = event.country && 
                event.name.toLowerCase().indexOf(event.country.toLowerCase()) === -1 &&
                event.name.toLowerCase().indexOf('ƒçesk') === -1 &&
                event.name.toLowerCase().indexOf('francous') === -1 &&
                event.name.toLowerCase().indexOf('≈°panƒõls') === -1 &&
                event.name.toLowerCase().indexOf('polsk') === -1 &&
                event.name.toLowerCase().indexOf('nƒõmeck') === -1 &&
                event.name.toLowerCase().indexOf('rakous') === -1 &&
                event.name.toLowerCase().indexOf('britsk') === -1 &&
                event.name.toLowerCase().indexOf('maƒèarsk') === -1 &&
                event.name.toLowerCase().indexOf('evropsk') === -1;
            
            var locationText = event.location || event.country;
            
            var html = '<div class="cal-panel-header ' + event.type + '" style="padding: 1rem 1.5rem;">' +
                '<div class="cal-panel-icon" style="font-size: 1.5rem;">' + icon + '</div>' +
                '<h3 class="cal-panel-title" style="font-size: 1.1rem;">' + event.name + (showCountryInTitle ? ' (' + event.country + ')' : '') + '</h3>' +
                '<p class="cal-panel-subtitle">' + event.nameEn + '</p>' +
                '<span class="cal-panel-date">' + event.date + '</span>' +
                '<span class="cal-panel-status ' + statusClass + '">' + statusText + '</span>' +
                '</div>';
            
            html += '<div class="cal-panel-body" style="padding: 1rem 1.5rem;">';
            html += '<div class="cal-panel-section"><div class="cal-panel-label">Tradice</div><div class="cal-panel-value">' + event.tradition + ', ' + event.edition + '</div></div>';
            
            if (event.organizer || locationText) {
                var orgLocParts = [];
                if (event.organizer) orgLocParts.push(event.organizer);
                if (locationText) orgLocParts.push(locationText);
                html += '<div class="cal-panel-section"><div class="cal-panel-label">Po≈ô√°d√°</div><div class="cal-panel-value">' + orgLocParts.join(' ¬∑ ') + '</div></div>';
            }
            
            html += '<div class="cal-panel-section"><div class="cal-panel-label">Web</div><div class="cal-panel-value"><a href="' + event.website + '" target="_blank">' + event.website.replace('https://', '').replace('www.', '') + '</a></div></div>';
            html += '</div>';
            
            return html;
        }
        
        panel.innerHTML = '<button class="cal-panel-close" onclick="closePanel()" style="position: absolute; top: 1rem; right: 1rem; z-index: 10;">√ó</button>' +
            buildEventSection(event1) +
            '<div style="border-top: 1px solid rgba(16,20,50,0.1);"></div>' +
            buildEventSection(event2);
        
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    window.toggleFilter = function(filter) {
        if (currentFilter === filter) {
            applyFilter('all');
        } else {
            applyFilter(filter);
        }
    };

    function renderCalendar() {
        var container = document.getElementById('film-calendar-app');
        if (!container) return;

        var monthShort = ['LED', '√öNO', 'B≈òE', 'DUB', 'KVƒö', 'ƒåVN', 'ƒåVC', 'SRP', 'Z√Å≈ò', '≈ò√çJ', 'LIS', 'PRO'];
        var weekdayLabels = ['Po', '√öt', 'St', 'ƒåt', 'P√°', 'So', 'Ne'];

        // Mapa ud√°lost√≠ podle dn≈Ø
        var eventMap = {};
        events.forEach(function(event) {
            var startDate = new Date(event.dateObj);
            var endDate = event.endDateObj ? new Date(event.endDateObj) : new Date(event.dateObj);
            var current = new Date(startDate);
            
            while (current <= endDate) {
                var key = '2026-' + current.getMonth() + '-' + current.getDate();
                if (!eventMap[key]) eventMap[key] = [];
                eventMap[key].push(event);
                current.setDate(current.getDate() + 1);
            }
        });

        // Kalend√°≈ôov√° m≈ô√≠≈æka
        var calendarHTML = '<div class="cal-year-grid">';
        
        for (var month = 0; month < 12; month++) {
            var firstDay = new Date(2026, month, 1);
            var lastDay = new Date(2026, month + 1, 0);
            var daysInMonth = lastDay.getDate();
            
            var startDayOfWeek = firstDay.getDay() - 1;
            if (startDayOfWeek < 0) startDayOfWeek = 6;
            
            calendarHTML += '<div class="cal-month-column"><div class="cal-month-header">' + monthShort[month] + '</div><div class="cal-weekdays">';
            for (var w = 0; w < 7; w++) {
                calendarHTML += '<div class="cal-weekday">' + weekdayLabels[w] + '</div>';
            }
            calendarHTML += '</div><div class="cal-days-grid">';
            
            for (var i = 0; i < startDayOfWeek; i++) {
                calendarHTML += '<div class="cal-day empty"></div>';
            }
            
            for (var day = 1; day <= daysInMonth; day++) {
                var dateKey = '2026-' + month + '-' + day;
                var isToday = TODAY.getFullYear() === 2026 && TODAY.getMonth() === month && TODAY.getDate() === day;
                var dayEvents = eventMap[dateKey] || [];
                var hasEvent = dayEvents.length > 0;
                var hasMultipleEvents = dayEvents.length > 1;
                
                var classes = 'cal-day';
                var content = '' + day;
                var dataAttrs = '';
                var clickHandler = '';
                
                if (isToday) classes += ' today';
                
                if (hasMultipleEvents) {
                    // Dva nebo v√≠ce ud√°lost√≠ - jeden p≈Ølen√Ω krou≈æek
                    // Se≈ôad√≠me tak, aby ceny byly naho≈ôe (≈ælut√°), festivaly dole (oran≈æov√°)
                    classes += ' has-event multi-day';
                    var sortedEvents = dayEvents.slice().sort(function(a, b) {
                        if (a.type === 'award' && b.type !== 'award') return -1;
                        if (a.type !== 'award' && b.type === 'award') return 1;
                        return 0;
                    });
                    var evTop = sortedEvents[0];
                    var evBottom = sortedEvents[1];
                    var pastTop = isPast(evTop) ? ' past' : '';
                    var pastBottom = isPast(evBottom) ? ' past' : '';
                    
                    // Jeden p≈Ølen√Ω krou≈æek s ƒç√≠slem uprost≈ôed
                    content = '<div class="cal-split-circle">' +
                        '<div class="cal-split-half top ' + evTop.type + pastTop + '"></div>' +
                        '<div class="cal-split-half bottom ' + evBottom.type + pastBottom + '"></div>' +
                        '</div>' +
                        '<span class="cal-split-number">' + day + '</span>' +
                        '<div class="cal-day-tooltip">üèÜüé¨ ' + evTop.name + ' + ' + evBottom.name + '<small>' + day + '. ' + monthNames[month] + '</small></div>';
                    
                    // Pro filtrov√°n√≠ pou≈æijeme kombinaci obou typ≈Ø
                    dataAttrs = ' data-type="' + evTop.type + ',' + evBottom.type + '" data-czech="' + (evTop.czech || evBottom.czech) + '" data-event-ids="' + evTop.id + ',' + evBottom.id + '"';
                    clickHandler = ' onclick="openMultiPanel(\'' + evTop.id + '\', \'' + evBottom.id + '\')"';
                    
                } else if (hasEvent) {
                    // Jedna ud√°lost
                    var eventData = dayEvents[0];
                    classes += ' has-event';
                    classes += eventData.type === 'award' ? ' award-day' : ' festival-day';
                    if (isPast(eventData)) classes += ' past-event';
                    
                    dataAttrs = ' data-type="' + eventData.type + '" data-czech="' + eventData.czech + '" data-event-id="' + eventData.id + '"';
                    
                    var icon = eventData.type === 'award' ? 'üèÜ' : 'üé¨';
                    content = day + '<div class="cal-day-tooltip">' + icon + ' ' + eventData.name + '<small>' + eventData.date + '</small></div>';
                    
                    clickHandler = ' onclick="openPanelById(\'' + eventData.id + '\')"';
                }
                
                calendarHTML += '<div class="' + classes + '"' + dataAttrs + clickHandler + '>' + content + '</div>';
            }
            
            calendarHTML += '</div></div>';
        }
        calendarHTML += '</div>';

        // Sestaven√≠ HTML
        container.innerHTML = '<div class="cal-header"><h2>Filmov√Ω kalend√°≈ô 2026</h2><p>P≈ôehled filmov√Ωch cen a festival≈Ø</p><div class="cal-current-date">Aktualizov√°no: ' + formatCurrentDate() + '</div></div>' +
            '<div class="cal-legend-bar">' +
            '<div class="cal-legend-item" data-filter="award" onclick="toggleFilter(\'award\')"><span class="cal-legend-dot award"></span><span>Filmov√© ceny</span></div>' +
            '<div class="cal-legend-item" data-filter="festival" onclick="toggleFilter(\'festival\')"><span class="cal-legend-dot festival"></span><span>Festivaly</span></div>' +
            '<div class="cal-legend-item" data-filter="czech" onclick="toggleFilter(\'czech\')"><span class="cal-legend-dot czech"><span class="cal-flag cal-flag-cz"></span><span class="cal-flag cal-flag-sk"></span></span><span>ƒåesk√© a slovensk√©</span></div>' +
            '<div class="cal-legend-item today-indicator"><span class="cal-legend-dot today"></span><span>Dnes</span></div>' +
            '</div>' +
            calendarHTML +
            '<div class="cal-section-header"><h3>üìÖ P≈ôehled ud√°lost√≠</h3><div class="cal-section-line"></div></div><div class="cal-events-grid" id="cal-events-grid"></div>' +
            '<div class="cal-panel-overlay" id="cal-panel-overlay" onclick="if(event.target === this) closePanel()"><div class="cal-panel" id="cal-panel-content"></div></div>';

        // Karty - chronologicky
        var eventsGrid = document.getElementById('cal-events-grid');

        events.forEach(function(event) {
            var icon = event.type === 'award' ? 'üèÜ' : 'üé¨';
            var past = isPast(event);
            
            var detailsHTML = '<div class="cal-detail-row"><span class="cal-detail-label">Tradice:</span><span class="cal-detail-value">' + event.tradition + '</span></div>';
            detailsHTML += '<div class="cal-detail-row"><span class="cal-detail-label">Roƒçn√≠k:</span><span class="cal-detail-value">' + event.edition + '</span></div>';
            if (event.organizer) detailsHTML += '<div class="cal-detail-row"><span class="cal-detail-label">Po≈ôadatel:</span><span class="cal-detail-value">' + event.organizer + '</span></div>';
            if (event.location) detailsHTML += '<div class="cal-detail-row"><span class="cal-detail-label">M√≠sto:</span><span class="cal-detail-value">' + event.location + '</span></div>';
            if (event.mainPrize) detailsHTML += '<div class="cal-detail-row"><span class="cal-detail-label">Hlavn√≠ cena:</span><span class="cal-detail-value">' + event.mainPrize + '</span></div>';
            detailsHTML += '<div class="cal-detail-row"><span class="cal-detail-label">O ud√°losti:</span><span class="cal-detail-value">' + event.description + '</span></div>';
            detailsHTML += '<div class="cal-detail-row"><span class="cal-detail-label">Web:</span><span class="cal-detail-value"><a href="' + event.website + '" target="_blank" onclick="event.stopPropagation()">' + event.website.replace('https://', '').replace('www.', '') + '</a></span></div>';
            if (event.winner2026) detailsHTML += '<div class="cal-detail-row"><span class="cal-detail-label">V√≠tƒõz 2026:</span><span class="cal-detail-value"><span class="cal-winner-tag">üèÜ ' + event.winner2026 + '</span></span></div>';

            var card = document.createElement('div');
            card.className = 'cal-event-card ' + event.type + (past ? ' past' : '');
            card.setAttribute('data-id', event.id);
            card.setAttribute('data-type', event.type);
            card.setAttribute('data-czech', event.czech);
            card.setAttribute('onclick', 'openPanelById(\'' + event.id + '\')');
            card.innerHTML = '<div class="cal-event-header"><span class="cal-event-icon">' + icon + '</span><div class="cal-event-content"><div class="cal-event-date">' + event.date + '</div><div class="cal-event-name">' + event.name + '</div><div class="cal-event-subtitle">' + event.nameEn + '</div></div></div><div class="cal-event-details">' + detailsHTML + '</div>';

            eventsGrid.appendChild(card);
        });
        
        // P≈ôid√°n√≠ hover efektu pro zv√Ωraznƒõn√≠ cel√©ho festivalu
        document.querySelectorAll('.cal-day.has-event').forEach(function(el) {
            el.addEventListener('mouseenter', function() {
                var eventId = this.getAttribute('data-event-id') || this.getAttribute('data-event-ids');
                if (!eventId) return;
                
                // M≈Ø≈æe obsahovat v√≠ce ID oddƒõlen√Ωch ƒç√°rkou
                var ids = eventId.split(',');
                ids.forEach(function(id) {
                    // Najdi v≈°echny dny s touto ud√°lost√≠ a zv√Ωrazni je
                    document.querySelectorAll('[data-event-id*="' + id + '"], [data-event-ids*="' + id + '"]').forEach(function(day) {
                        if (day !== el) {
                            day.classList.add('festival-highlight');
                        }
                    });
                });
            });
            
            el.addEventListener('mouseleave', function() {
                // Odeber zv√Ωraznƒõn√≠ ze v≈°ech dn≈Ø
                document.querySelectorAll('.festival-highlight').forEach(function(day) {
                    day.classList.remove('festival-highlight');
                });
            });
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', renderCalendar);
    } else {
        renderCalendar();
    }
})();
</script>
